試玩網址 
https://taiwan-monopoly.onrender.com 

一、遊戲目標

當其他玩家全部破產，只剩你還活著，你就是贏家。

破產＝現金變成負的，而且已經把全部地都賣掉，還是還不完。

二、基本設定

每間房間最多 4 個玩家。

每位玩家：

起始金額：$150,000

起點位置：格子 0（起點）

棋子顏色由系統自動指定。

房主（第一個進房的人）可以按「開始遊戲」，至少要 2 人 才能開局。

三、回合流程（每一回合會發生什麼事）

輪到你時，右邊控制區會出現「擲骰子」按鈕。

點「擲骰子」：

兩顆骰子一起丟，合計步數 = 你要往前走的格數。

棋子會依照步數，一格格沿著棋盤外圈走，動畫跑完再結算事件。

移動過程：

位置是「(原本位置 + 骰子點數) mod 40」。

如果繞過「起點」（也就是新位置的 index < 舊位置），會領到 $2,000 薪水。

停在的新格子，依照格子類型觸發事件（下面詳說）。

當所有事件結束：

若中間有觸發「變賣資產」，要先處理完變賣或破產。

否則：

若是買地的詢問，你做完「買 / 不買」決定後，伺服器自動幫你切換到下一位玩家。

若是繳稅、付房租、抽卡等等，動畫 / 提示跑完後，客戶端會送 endTurn，伺服器再換人。

四、棋盤格子類型與效果
1. 起點（GO）

位置：id 0

只要走過起點（不一定停在上面），就會 + $2,000。

停在起點本身沒有額外事件。

2. 一般地產（PROP）

例如：西門町、台北 101、安平古堡……

若沒人擁有：

如果你 現金 ≥ 地價，系統會跳出「要不要買」確認視窗。

按「購買」：扣掉地價，該格 owner 變成你。

按「放棄」或錢不夠：什麼事都不會發生（地還是屬於銀行）。

買地時如果錢不夠，不會幫你做變賣 → 直接視為無法購買。

若是別人持有：

你必須付房租（下面「租金計算」詳解）。

如果付完變成負錢 → 啟動「變賣資產」。

若是你自己：

什麼事都不會發生（目前沒有「站到自己家送錢」或其他效果）。

3. 車站（RAIL）

例如：台鐵車站、高鐵台中站、高鐵左營站、花蓮車站

算是一種特殊地產，價格在地圖中定好。

租金計算方式不同（見後面「租金計算」）。

4. 公共事業 / 公司的格子（UTIL）

例如：高鐵新竹站、台電公司（在程式裡是 UTIL 類）

也是一種可以買的資產。

租金跟骰子點數有關（見後面「租金計算」）。

5. 稅金格（TAX）

如：「所得稅」、「豪宅稅」、「豪華稅」等。

停上去就直接扣固定金額（程式裡有設定 amount）。

如果扣完變成負錢 → 啟動變賣或破產流程。

6. 機會（CHANCE）與命運（DESTINY）

停上去會抽一張卡：

CHANCE_CARDS（機會） 或 DESTINY_CARDS（命運）。

每張卡有一行文字說明 + 一個金額 val：

val > 0 → 得到錢

val < 0 → 付錢

抽完卡之後：

會視金額加減你的資金。

若變成負數 → 啟動變賣 / 破產流程。

目前卡片效果只有「加錢 / 扣錢」，沒有走格子、出獄等複雜效果。

7. 免費停車（FREE_PARKING）

停在這格完全沒事，就是「安全休息區」。

8. 監獄（JAIL）

目前只有「前進監獄」這個事件會把你送到這格。

沒有「關幾回合」或「付錢出獄」的機制。

當你下回合一樣照常擲骰子、正常移動。

9. 前進監獄（GOTO_JAIL）

停到這格，直接被送往監獄格（id 10）。

不會額外扣錢，只是把你的位置改成 10。

五、租金與建築規則
1. 地產顏色套裝與建築

每個 PROP 有屬於自己的顏色（Brown, LightBlue, Pink, …）。

要在某個地產上建房子，必須先擁有同顏色的全套地。
例如：LightBlue 組的地都要是你的，才可以在其中一個地上開始蓋房子。

建築層級：

level = 0：空地

level = 1~4：1~4 棟房子

level = 5：飯店

建房成本以 tile.house 為準（例如 6,000、9,000…），每升一級付一次。

前端 UI 右邊選單中只有你擁有、且未滿等級的 PROP 會出現在下拉選單裡。

2. 租金計算（calculateRent）

伺服器的規則（簡化成玩家版說明）：

(1) 一般地產（PROP）

如果有房子 / 飯店：

租金 = 該格 rents[level]（程式裡的表格）。

如果沒有建築（level = 0）：

先看你是否擁有同顏色全套地：

有全套 → 空地租金 × 2

沒有全套 → 空地租金（rents[0]）

(2) 車站（RAIL）

看房東目前擁有幾個 RAIL：

1 個 → baseRent × 1

2 個 → baseRent × 2

3 個 → baseRent × 4

4 個 → baseRent × 8
（程式用 baseRent * 2^(n-1)）

(3) 公共事業 / 公司（UTIL）

租金 = 骰子點數總和 × factor × 100

factor 基本值在地圖上（通常 4）。

若房東擁有 2 個 UTIL，factor 再乘上 2.5。

也就是說：

只有 1 個公司 → 租金 ≈ 點數 × 4 × 100

2 個都持有 → 租金 ≈ 點數 × 10 × 100

六、錢不夠時：變賣資產 & 破產
1. 什麼時候會檢查「錢不夠」

所有「扣錢」的事件都會用 adjustMoney：

支付房租、繳稅、抽卡付錢、其他支出……

如果扣完之後 money < 0，且這次支出允許變賣（allowLiquidation = true），就會啟動變賣流程。

注意：買地、蓋房子時 allowLiquidation = false，如果你錢不夠，只是單純買不了，不會被強迫賣地。

2. 變賣流程（liquidation）

伺服器會整理你持有的全部資產（PROP / RAIL / UTIL），計算每格的可回收價值：

sellValue = floor(0.5 × (地價 + 等級 × 建築成本))

如果你完全沒有資產可以賣：

直接進入破產（handleBankruptcy）。

若有資產可以賣：

伺服器將 liquidation 狀態設定起來，並只對你這個玩家送出事件：

前端右邊會出現「變賣清單」，每一格顯示「估計可賣多少」。

只要你還在負債，列表就不會消失。

3. 你可以做的事

在變賣介面：

按「出售」某個地：

該地回收成現金（如上計算）。

該地 owner 清空，level 變 0。

伺服器再檢查你現在的 money：

若 ≥ 0：

變賣流程結束，liquidationResolved，輪到下一位玩家。

若還是 < 0，但你還有地可以賣：

更新負債金額與剩下的可賣地，讓你繼續賣。

若 < 0 而且已經沒有地可賣：

自動進入破產（handleBankruptcy）。

按「宣告破產」：

伺服器執行 bankruptcy 流程（見下一段）。

4. 破產（Bankruptcy）

一旦破產：

bankrupt = true

money = 0

所有土地的 owner 清空、level 變 0。

你從 turn order 中被移除，不會再輪到你回合。

系統在聊天室廣播：某玩家破產，資產歸還銀行。

若房主破產且離線，伺服器會把房主換給下一位仍在線 / 還活著的玩家。

七、遊戲結束判定

伺服器會不斷檢查：

還活著（沒破產）的玩家數量 alive.length：

若 ≤ 1 且遊戲狀態為 PLAYING：

遊戲結束 status = ENDED

若有剩下的玩家 → 他就是贏家（winnerId）

若連活著的都沒有 → 所有人都破產，無特定贏家。

前端會顯示「遊戲結束」彈窗，並顯示：

贏家名字（如果有）

排行榜：依據「現金 + 地價 + 建築成本」的總資產排序（即 totalAssetMap）。

八、多人連線 & 房間機制（簡述）

房號（roomId）：例如 ROOM1、ABC123，只要大家輸入同一個就會進同一房。

伺服器用 rooms Map 管理每個房間的 state：

玩家列表、地圖、回合 index、骰子結果、遊戲狀態等等。

同一個瀏覽器會存一個 playerToken 在 localStorage：

重新整理、重連同一房號時，可以用同一個 playerId 回到原本的棋子。

目前沒有「房間列表」或「離開房間」按鈕；
現在要離開就是關掉頁面或刷新。
